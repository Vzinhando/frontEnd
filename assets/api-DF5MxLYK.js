const i="https://vizinhando-api.up.railway.app";async function n(o,t={}){const c=`${i}${o}`,e=localStorage.getItem("authToken"),s={"Content-Type":"application/json"};e&&(s.Authorization=`Bearer ${e}`);const a={...t,headers:{...s,...t.headers}};try{const r=await fetch(c,a);if(!r.ok){const u=await r.json().catch(()=>({message:`Ocorreu um erro no servidor (status: ${r.status})`}));throw new Error(u.message||"Falha na comunicação com o servidor.")}return r.status===204?{success:!0}:await r.json()}catch(r){throw console.error("Erro na chamada da API:",r),r}}async function h(o,t){const c=`${i}${o}`,e=localStorage.getItem("authToken"),s={};e&&(s.Authorization=`Bearer ${e}`);try{const a=await fetch(c,{method:"POST",headers:s,body:t});if(!a.ok){const r=await a.json().catch(()=>({message:`Ocorreu um erro no servidor (status: ${a.status})`}));throw new Error(r.message||"Falha no upload do arquivo.")}return await a.json()}catch(a){throw console.error("Erro no upload:",a),a}}const d={get:o=>n(o),post:(o,t)=>n(o,{method:"POST",body:JSON.stringify(t)}),patch:(o,t)=>n(o,{method:"PATCH",body:JSON.stringify(t)}),delete:o=>n(o,{method:"DELETE"}),upload:(o,t)=>h(o,t)};export{d as a};
