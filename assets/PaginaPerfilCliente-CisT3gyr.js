import{u as b,r as c,y as l,j as a,N as A}from"./index-Cj6LEt_r.js";import{a as m}from"./api-DF5MxLYK.js";import"https://cdn.jsdelivr.net/npm/flowise-embed/dist/web.js";function z({usuario:e,onUserUpdate:v,onLogout:N}){const n=b(),[h,d]=c.useState(!1),[g,x]=c.useState(""),[j,u]=c.useState(""),[_,i]=c.useState(!1);c.useEffect(()=>{e?(x(e.nomeUsuario||""),u(e.cepUsuario||"")):(l.warn("Você precisa estar logado para acessar esta página."),n("/login"))},[e,n]);const C=async s=>{s.preventDefault(),i(!0);const t={nomeUsuario:g,cepUsuario:j};try{const r=await m.patch(`/api/Usuarios/${e.idUsuario}`,t);v(r),d(!1),l.success("Perfil atualizado com sucesso!")}catch(r){l.error(r.message||"Não foi possível atualizar o perfil.")}finally{i(!1)}},p=async()=>{if(window.confirm("Você tem certeza que deseja deletar a sua conta? Esta ação é irreversível!")){i(!0);try{await m.delete(`/api/Usuarios/${e.idUsuario}`),l.info("Conta deletada com sucesso."),N(),n("/")}catch(s){l.error(s.message||"Não foi possível deletar a conta.")}finally{i(!1)}}},f=async s=>{const t=s.target.files[0];if(!t)return;if(t.size>5*1024*1024){l.error("O arquivo é muito grande! O limite é de 5MB.");return}if(!t.type.startsWith("image/")){l.error("Por favor, selecione um arquivo de imagem.");return}const r=new FormData;r.append("foto",t),i(!0);try{const o=await m.upload(`/api/usuarios/${e.idUsuario}/foto`,r);if(o.fotoUrl){const E={...e,fotoUsuario:o.fotoUrl};v(E),l.success("Foto de perfil atualizada com sucesso!")}else throw new Error("A resposta da API não continha a URL da nova foto.")}catch(o){l.error(o.message||"Não foi possível atualizar a foto."),console.error("Erro no upload da foto:",o)}finally{i(!1)}};return e?a.jsxs("div",{className:"quadroGeralCliente",children:[a.jsxs("div",{className:"quadroPerfilCliente",children:[a.jsxs("div",{className:"imagemPerfilCliente",children:[a.jsx("img",{src:e.fotoUsuario||"/img/semUsuario.svg",alt:`Foto de perfil de ${e.nomeUsuario}`}),a.jsx("label",{htmlFor:"upload-foto",className:"botaoTrocarFoto",children:"Trocar Foto"}),a.jsx("input",{id:"upload-foto",type:"file",accept:"image/png, image/jpeg",style:{display:"none"},onChange:f})]}),h?a.jsxs("form",{className:"infosCliente",onSubmit:C,children:[a.jsxs("div",{className:"camposEdicaoCliente",children:[a.jsx("label",{htmlFor:"nomeEditado",children:"Nome:"}),a.jsx("input",{id:"nomeEditado",type:"text",className:"inputEdicaoNome",value:g,onChange:s=>x(s.target.value)}),a.jsx("label",{htmlFor:"cepEditado",children:"CEP:"}),a.jsx("input",{id:"cepEditado",type:"text",className:"inputEdicaoCep",value:j,onChange:s=>u(s.target.value)})]}),a.jsxs("div",{className:"botoesAcao",children:[a.jsx("button",{type:"submit",className:"btn btn-acao-primaria",children:"Salvar"}),a.jsx("button",{type:"button",onClick:()=>d(!1),className:"btn btn-cinza",children:"Cancelar"})]})]}):a.jsxs("div",{className:"infosCliente",children:[a.jsxs("div",{className:"nomePerfilCliente",children:[a.jsx("h2",{children:e.nomeUsuario}),a.jsxs("p",{children:["CEP: ",e.cepUsuario]})]}),a.jsxs("div",{className:"estrelasPerfilCliente",children:[a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaCliente",alt:"Estrela de avaliação"}),a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaCliente",alt:"Estrela de avaliação"}),a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaCliente",alt:"Estrela de avaliação"}),a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaCliente",alt:"Estrela de avaliação"}),a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaCliente",alt:"Estrela de avaliação"})]}),a.jsxs("div",{className:"iconesRedesCliente",children:[a.jsx("img",{src:"/img/ImagemLaura/instagram.svg",className:"icon",alt:"Ícone do Instagram"}),a.jsx("img",{src:"/img/ImagemLaura/facebook.svg",className:"icon",alt:"Ícone do Facebook"}),a.jsx("img",{src:"/img/ImagemLaura/tiktok.svg",className:"icon",alt:"Ícone do TikTok"})]}),a.jsxs("div",{className:"botoesAcao",children:[a.jsx("button",{onClick:()=>d(!0),className:"btn btn-principal",children:"Editar Perfil"}),a.jsx("button",{onClick:p,className:"btn btn-perigo",children:"Deletar Conta"})]})]})]}),a.jsxs("div",{className:"conteudoPerfilCliente",children:[a.jsx("h1",{className:"TituloPerfilCliente",children:"Preferências"}),a.jsxs("div",{className:"preferenciasCliente",children:[a.jsx("button",{type:"button",className:"btn btn-outline",children:"Beleza"}),a.jsx("button",{type:"button",className:"btn btn-outline",children:"Manutenção"}),a.jsx("button",{type:"button",className:"btn btn-outline",children:"Limpeza"})]})]}),a.jsx("div",{className:"conteudoPerfilCliente",children:a.jsxs("div",{className:"cardsCliente",children:[a.jsxs("div",{className:"cardCliente",children:[a.jsx("h3",{className:"cardCliente-numero",children:"8"}),a.jsxs("h4",{className:"cardCliente-info",children:["Comentários ",a.jsx("br",{})," feitos"]})]}),a.jsxs("div",{className:"cardCliente",children:[a.jsx("h3",{className:"cardCliente-numero",children:"12"}),a.jsxs("h4",{className:"cardCliente-info",children:["Serviços ",a.jsx("br",{})," contratados"]})]})]})}),a.jsx("div",{className:"todasAvaliacoesCliente",children:a.jsx("p",{children:"Ver o histórico de avaliações!"})}),a.jsxs("div",{className:"containerAvaliacoesCliente",children:[a.jsxs("div",{className:"quadroAvaliacoesCliente",children:[a.jsxs("p",{children:["Serviço excelente!",a.jsx("br",{}),"Contrataria novamente!"]}),a.jsxs("div",{className:"estrelasAvaliacao",children:[a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaAvaliacaoCliente",alt:"Estrela de avaliação"}),a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaAvaliacaoCliente",alt:"Estrela de avaliação"}),a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaAvaliacaoCliente",alt:"Estrela de avaliação"}),a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaAvaliacaoCliente",alt:"Estrela de avaliação"}),a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaAvaliacaoCliente",alt:"Estrela de avaliação"})]})]}),a.jsxs("div",{className:"quadroAvaliacoesCliente",children:[a.jsxs("p",{children:["Trabalho impecável!",a.jsx("br",{}),"Super recomendo."]}),a.jsxs("div",{className:"estrelasAvaliacao",children:[a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaAvaliacaoCliente",alt:"Estrela de avaliação"}),a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaAvaliacaoCliente",alt:"Estrela de avaliação"}),a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaAvaliacaoCliente",alt:"Estrela de avaliação"}),a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaAvaliacaoCliente",alt:"Estrela de avaliação"}),a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaAvaliacaoCliente",alt:"Estrela de avaliação"})]})]}),a.jsxs("div",{className:"quadroAvaliacoesCliente",children:[a.jsxs("p",{children:["Ótima profissional!",a.jsx("br",{}),"Muito atenciosa."]}),a.jsxs("div",{className:"estrelasAvaliacao",children:[a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaAvaliacaoCliente",alt:"Estrela de avaliação"}),a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaAvaliacaoCliente",alt:"Estrela de avaliação"}),a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaAvaliacaoCliente",alt:"Estrela de avaliação"}),a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaAvaliacaoCliente",alt:"Estrela de avaliação"}),a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaAvaliacaoCliente",alt:"Estrela de avaliação"})]})]}),a.jsxs("div",{className:"quadroAvaliacoesCliente",children:[a.jsxs("p",{children:["Recomendo fortemente.",a.jsx("br",{}),"Resultado incrível."]}),a.jsxs("div",{className:"estrelasAvaliacao",children:[a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaAvaliacaoCliente",alt:"Estrela de avaliação"}),a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaAvaliacaoCliente",alt:"Estrela de avaliação"}),a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaAvaliacaoCliente",alt:"Estrela de avaliação"}),a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaAvaliacaoCliente",alt:"Estrela de avaliação"}),a.jsx("img",{src:"/img/estrela_clara.svg",className:"estrelaAvaliacaoCliente",alt:"Estrela de avaliação"})]})]})]}),a.jsx("div",{className:"botoesCliente",children:a.jsx(A,{to:"/",className:"btn btn-outline",children:"Voltar"})}),a.jsx("div",{className:"criacaoContaCliente",children:a.jsx("h2",{children:"Conta criada desde Fev - 2025"})})]}):a.jsx("div",{children:"Carregando perfil..."})}export{z as default};
