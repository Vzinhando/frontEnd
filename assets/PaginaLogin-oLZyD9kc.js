import{r as o,j as a,N as c,y as m}from"./index-Cj6LEt_r.js";import{a as p}from"./api-DF5MxLYK.js";import"https://cdn.jsdelivr.net/npm/flowise-embed/dist/web.js";function L({onLoginSuccess:i}){const[n,d]=o.useState(""),[t,u]=o.useState(""),[r,l]=o.useState(!1),g=async s=>{s.preventDefault(),l(!0);const h={EmailUsuario:n,SenhaUsuario:t};try{const e=await p.post("/api/Usuarios/login",h);if(e.token&&e.usuario)localStorage.setItem("authToken",e.token),localStorage.setItem("usuarioLogado",JSON.stringify(e.usuario)),m.success(`Bem-vindo(a) de volta, ${e.usuario.nomeUsuario}!`),i&&i(e.usuario);else throw new Error("Resposta inesperada do servidor.")}catch(e){m.error(e.message||"E-mail ou senha inválidos."),console.error("Falha no login:",e)}finally{l(!1)}};return a.jsxs("section",{className:"containerLogin",children:[a.jsxs("form",{className:"dadosLogin",onSubmit:g,children:[a.jsx("label",{className:"campoLogin",htmlFor:"login-email",children:"Login"}),a.jsx("input",{id:"login-email",className:"campoInputLogin",type:"email",placeholder:"Digite seu email",value:n,onChange:s=>d(s.target.value),required:!0}),a.jsx("label",{className:"campoSenha",htmlFor:"login-senha",children:"Senha"}),a.jsx("input",{id:"login-senha",className:"campoInputSenha",type:"password",placeholder:"Digite a sua senha",value:t,onChange:s=>u(s.target.value),required:!0}),a.jsxs("p",{className:"esquecerSenha",children:["Esqueceu a senha? ",a.jsx("a",{children:"Clique aqui"})]}),a.jsx("br",{}),a.jsxs("p",{className:"textoCadastrar",children:["Ainda não possui uma conta? ",a.jsx(c,{className:"cadastroClick",to:"/cadastro",children:"Cadastre-se"})," "]}),a.jsxs("div",{className:"grupoBotoesLogin",children:[a.jsx("button",{type:"submit",className:"botaoEntrarLogin",disabled:r,children:r?"Entrando...":"Avançar"}),a.jsx("p",{children:"Continuar com"}),a.jsx(c,{to:"/",className:"botaoLogarGoogle",children:a.jsx("img",{className:"imagemGoogleLogar",src:"/img/botaoGoogle.svg",alt:"Login com Google"})})]})]}),a.jsx("div",{className:"linhaReta"}),a.jsxs("div",{className:"logoBemVindo",children:[a.jsx("img",{className:"imagemLogo",src:"/img/Logo/Logo.svg",alt:"Logo Vizinhando",width:"300px"}),a.jsx("h1",{className:"textoBemVindo",children:"Seja bem vindo(a) de volta!"})]})]})}export{L as default};
